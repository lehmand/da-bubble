<div class="full-page-content">
  <mat-card class="big-chat-card" appearance="outlined">
    <mat-card-header class="header">
      <div class="drop-down-div">
        <button *ngIf="global.channelSelected" class="drop-down-button" mat-button (click)="openDialog()">
          <span class="btn-text-img"># {{ global.currentChannel?.name }}
            <img src="./assets/img/arrow_drop_down.svg" /></span>
        </button>
        <div (click)="showMyUserProfile()" class="user-chat-info" *ngIf="!global.channelSelected">
          <img [src]="
              global.statusCheck
                ? global.currentUserData.picture
                : selectedUser?.picture
            " />
          <h4>
            {{
            global.statusCheck
            ? global.currentUserData.name + "(Du)"
            : selectedUser?.name
            }}
          </h4>
        </div>
      </div>
     

      <div>
        <div *ngIf="openMyProfile">
            <div *ngIf="currentUserwasSelected">
                <app-dialog-header-profil-card
                    (closeProfile)="closeMyUserProfile()"></app-dialog-header-profil-card>
            </div>
            <div *ngIf="contactWasSelected">
                <app-profile-contact-card (closeProfile)="closeMyUserProfile()"
                    [selectedContact]="selectedUser"></app-profile-contact-card>
            </div>
        </div>
    </div>

      <div class="members-container" *ngIf="global.channelSelected">
        <div class="member-avatars" (click)="openMemberDialog()">
          <div class="avatar-container">
            <img
              class="avatar"
              *ngFor="let member of channelMembers.slice(0, 3)"
              [src]="member.picture"
            />
          </div>
          <div class="member-count">
            <span> {{ channelMembers.length }} </span>
          </div>
        </div>
        <div class="img-container add-member" (click)="openAddMemberDialog()">
          <svg
            width="40"
            height="40"
            viewBox="0 0 40 40"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon"
          >
            <rect width="40" height="40" rx="20" fill="#ECEEFE" />
            <mask
              id="mask0_392_4421"
              style="mask-type: alpha"
              maskUnits="userSpaceOnUse"
              x="8"
              y="8"
              width="24"
              height="24"
            >
              <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
            </mask>
            <g mask="url(#mask0_392_4421)">
              <path
                d="M27 22C26.7167 22 26.4793 21.904 26.288 21.712C26.096 21.5207 26 21.2833 26 21V19H24C23.7167 19 23.4793 18.904 23.288 18.712C23.096 18.5207 23 18.2833 23 18C23 17.7167 23.096 17.479 23.288 17.287C23.4793 17.0957 23.7167 17 24 17H26V15C26 14.7167 26.096 14.479 26.288 14.287C26.4793 14.0957 26.7167 14 27 14C27.2833 14 27.5207 14.0957 27.712 14.287C27.904 14.479 28 14.7167 28 15V17H30C30.2833 17 30.5207 17.0957 30.712 17.287C30.904 17.479 31 17.7167 31 18C31 18.2833 30.904 18.5207 30.712 18.712C30.5207 18.904 30.2833 19 30 19H28V21C28 21.2833 27.904 21.5207 27.712 21.712C27.5207 21.904 27.2833 22 27 22ZM17 20C15.9 20 14.9583 19.6083 14.175 18.825C13.3917 18.0417 13 17.1 13 16C13 14.9 13.3917 13.9583 14.175 13.175C14.9583 12.3917 15.9 12 17 12C18.1 12 19.0417 12.3917 19.825 13.175C20.6083 13.9583 21 14.9 21 16C21 17.1 20.6083 18.0417 19.825 18.825C19.0417 19.6083 18.1 20 17 20ZM10 28C9.71667 28 9.47933 27.904 9.288 27.712C9.096 27.5207 9 27.2833 9 27V25.2C9 24.6333 9.146 24.1123 9.438 23.637C9.72933 23.1623 10.1167 22.8 10.6 22.55C11.6333 22.0333 12.6833 21.6457 13.75 21.387C14.8167 21.129 15.9 21 17 21C18.1 21 19.1833 21.129 20.25 21.387C21.3167 21.6457 22.3667 22.0333 23.4 22.55C23.8833 22.8 24.2707 23.1623 24.562 23.637C24.854 24.1123 25 24.6333 25 25.2V27C25 27.2833 24.904 27.5207 24.712 27.712C24.5207 27.904 24.2833 28 24 28H10ZM11 26H23V25.2C23 25.0167 22.9543 24.85 22.863 24.7C22.771 24.55 22.65 24.4333 22.5 24.35C21.6 23.9 20.6917 23.5623 19.775 23.337C18.8583 23.1123 17.9333 23 17 23C16.0667 23 15.1417 23.1123 14.225 23.337C13.3083 23.5623 12.4 23.9 11.5 24.35C11.35 24.4333 11.2293 24.55 11.138 24.7C11.046 24.85 11 25.0167 11 25.2V26ZM17 18C17.55 18 18.021 17.804 18.413 17.412C18.8043 17.0207 19 16.55 19 16C19 15.45 18.8043 14.9793 18.413 14.588C18.021 14.196 17.55 14 17 14C16.45 14 15.9793 14.196 15.588 14.588C15.196 14.9793 15 15.45 15 16C15 16.55 15.196 17.0207 15.588 17.412C15.9793 17.804 16.45 18 17 18Z"
                fill="black"
              />
            </g>
          </svg>
        </div>
      </div>
    </mat-card-header>
      
     

               
        
      

        <div *ngIf="!global.statusCheck" class="main-current-messagebox" #scrollContainer>
            <div *ngFor="let message of messagesData; let i=index">
                <div *ngIf="displayDayInfo(i)"  class="new-day-info">
                    <div class="day-info">
                        <div class="line"></div>
                        <span class="day-span">{{ getDayInfoForMessage(i) }}</span>
                    </div>
                </div>  
                                              

                <div [ngClass]="{'main-mesage-info-current':message.senderId===global.currentUserData.id,
                'main-message-info-user':message.senderId !== global.currentUserData.id, 
                'backiColor':checkUpdateBackcolor===message.id,
                'backColorHover':checkUpdateBackcolor===message.id
                  }"
                    (mouseleave)="resetIcon(message);" 
                         >
                    <div *ngIf="editMessageId === message.id" class="edit-mesage-box">

                        <textarea class="edit-input" [(ngModel)]="editableMessageText"></textarea>
                        <div class="button-box">
                            <button class="btn-secondary" (click)="cancelEdit()">Abbrechen</button>
                            <button class="btn-primary" (click)="saveOrDeleteMessage(message)">Speichern</button>
                        </div>
                    </div>
                    <mat-card *ngIf="editMessageId !== message.id"
                        [ngClass]="{'comment-box-current':message.senderId===global.currentUserData.id,
                        'comment-box-user':message.senderId !== global.currentUserData.id,
                        'position':message.stickerBoxCurrentStyle,
                        'position-user':message.stickerBoxCurrentStyle,
                         }">
                        <mat-card-content style="padding: 5px 5px;" class="comment-content">
                            <div *ngFor="let image of commentImages let i=index"
                                (click)="chooseStricker($event,message,image)">
                                <div class="comment-stricker"
                                    [ngClass]="{'backColor-current':message.senderchoosedStickereBackColor===image && message.senderId===global.currentUserData.id && message.senderSticker!== '',
                                            'backColor-user':message.recipientChoosedStickerBackColor===image  && message.senderId!==global.currentUserData.id && message.recipientSticker !== ''}">
                                    <img [src]="image">
                                </div>
                            </div>


                            <div [ngClass]="{'hidden': isiconShow===message.id}" class="add-reaction"
                                (click)="displayHiddenIcon(message)">
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_489_4318" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8"
                                        y="8" width="24" height="24">
                                        <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_489_4318)">
                                        <path
                                            d="M20 30C18.6167 30 17.3167 29.7375 16.1 29.2125C14.8833 28.6875 13.825 27.975 12.925 27.075C12.025 26.175 11.3125 25.1167 10.7875 23.9C10.2625 22.6833 10 21.3833 10 20C10 18.6167 10.2625 17.3167 10.7875 16.1C11.3125 14.8833 12.025 13.825 12.925 12.925C13.825 12.025 14.8833 11.3125 16.1 10.7875C17.3167 10.2625 18.6167 10 20 10C20.75 10 21.4792 10.0792 22.1875 10.2375C22.8958 10.3958 23.5667 10.625 24.2 10.925C24.1333 11.0917 24.0833 11.2667 24.05 11.45C24.0167 11.6333 24 11.8167 24 12C24 12.2333 24.025 12.4542 24.075 12.6625C24.125 12.8708 24.1917 13.0667 24.275 13.25C23.6583 12.8667 22.9917 12.5625 22.275 12.3375C21.5583 12.1125 20.8 12 20 12C17.7833 12 15.8958 12.7792 14.3375 14.3375C12.7792 15.8958 12 17.7833 12 20C12 22.2167 12.7792 24.1042 14.3375 25.6625C15.8958 27.2208 17.7833 28 20 28C22.2167 28 24.1042 27.2208 25.6625 25.6625C27.2208 24.1042 28 22.2167 28 20C28 19.3333 27.9208 18.6917 27.7625 18.075C27.6042 17.4583 27.3833 16.875 27.1 16.325C27.3667 16.5417 27.6583 16.7083 27.975 16.825C28.2917 16.9417 28.6333 17 29 17C29.0833 17 29.1708 16.9958 29.2625 16.9875C29.3542 16.9792 29.4417 16.9667 29.525 16.95C29.675 17.4333 29.7917 17.9292 29.875 18.4375C29.9583 18.9458 30 19.4667 30 20C30 21.3833 29.7375 22.6833 29.2125 23.9C28.6875 25.1167 27.975 26.175 27.075 27.075C26.175 27.975 25.1167 28.6875 23.9 29.2125C22.6833 29.7375 21.3833 30 20 30ZM23.5 19C23.9333 19 24.2917 18.8583 24.575 18.575C24.8583 18.2917 25 17.9333 25 17.5C25 17.0667 24.8583 16.7083 24.575 16.425C24.2917 16.1417 23.9333 16 23.5 16C23.0667 16 22.7083 16.1417 22.425 16.425C22.1417 16.7083 22 17.0667 22 17.5C22 17.9333 22.1417 18.2917 22.425 18.575C22.7083 18.8583 23.0667 19 23.5 19ZM16.5 19C16.9333 19 17.2917 18.8583 17.575 18.575C17.8583 18.2917 18 17.9333 18 17.5C18 17.0667 17.8583 16.7083 17.575 16.425C17.2917 16.1417 16.9333 16 16.5 16C16.0667 16 15.7083 16.1417 15.425 16.425C15.1417 16.7083 15 17.0667 15 17.5C15 17.9333 15.1417 18.2917 15.425 18.575C15.7083 18.8583 16.0667 19 16.5 19ZM20 25.5C21.1833 25.5 22.2292 25.175 23.1375 24.525C24.0458 23.875 24.7 23.0333 25.1 22H14.9C15.3 23.0333 15.9542 23.875 16.8625 24.525C17.7708 25.175 18.8167 25.5 20 25.5ZM28 13H27C26.7167 13 26.4792 12.9042 26.2875 12.7125C26.0958 12.5208 26 12.2833 26 12C26 11.7167 26.0958 11.4792 26.2875 11.2875C26.4792 11.0958 26.7167 11 27 11H28V10C28 9.71667 28.0958 9.47917 28.2875 9.2875C28.4792 9.09583 28.7167 9 29 9C29.2833 9 29.5208 9.09583 29.7125 9.2875C29.9042 9.47917 30 9.71667 30 10V11H31C31.2833 11 31.5208 11.0958 31.7125 11.2875C31.9042 11.4792 32 11.7167 32 12C32 12.2833 31.9042 12.5208 31.7125 12.7125C31.5208 12.9042 31.2833 13 31 13H30V14C30 14.2833 29.9042 14.5208 29.7125 14.7125C29.5208 14.9042 29.2833 15 29 15C28.7167 15 28.4792 14.9042 28.2875 14.7125C28.0958 14.5208 28 14.2833 28 14V13Z"
                                            fill="black" />
                                    </g>
                                </svg>
                            </div>
                            <div *ngFor="let stricker of commentStricker"
                                (click)="chooseStricker ($event,message,stricker)">
                                <div *ngIf="isiconShow===message.id" class="comment-icon-box"
                                    [ngClass]="{'backColor-current':message.senderchoosedStickereBackColor===stricker && message.senderId===global.currentUserData.id && message.senderSticker!== '',
                                   'backColor-user':message.recipientChoosedStickerBackColor===stricker  && message.senderId!==global.currentUserData.id && message.recipientSticker !== '' }">
                                    <img [src]="stricker">
                                </div>
                            </div>
                            <div class="open-thread">
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_489_4322" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8"
                                        y="8" width="24" height="24">
                                        <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_489_4322)">
                                        <path
                                            d="M15 22H25C25.2833 22 25.5207 21.904 25.712 21.712C25.904 21.5207 26 21.2833 26 21C26 20.7167 25.904 20.479 25.712 20.287C25.5207 20.0957 25.2833 20 25 20H15C14.7167 20 14.479 20.0957 14.287 20.287C14.0957 20.479 14 20.7167 14 21C14 21.2833 14.0957 21.5207 14.287 21.712C14.479 21.904 14.7167 22 15 22ZM15 19H25C25.2833 19 25.5207 18.904 25.712 18.712C25.904 18.5207 26 18.2833 26 18C26 17.7167 25.904 17.479 25.712 17.287C25.5207 17.0957 25.2833 17 25 17H15C14.7167 17 14.479 17.0957 14.287 17.287C14.0957 17.479 14 17.7167 14 18C14 18.2833 14.0957 18.5207 14.287 18.712C14.479 18.904 14.7167 19 15 19ZM15 16H25C25.2833 16 25.5207 15.9043 25.712 15.713C25.904 15.521 26 15.2833 26 15C26 14.7167 25.904 14.479 25.712 14.287C25.5207 14.0957 25.2833 14 25 14H15C14.7167 14 14.479 14.0957 14.287 14.287C14.0957 14.479 14 14.7167 14 15C14 15.2833 14.0957 15.521 14.287 15.713C14.479 15.9043 14.7167 16 15 16ZM28.3 28.3L26 26H12C11.45 26 10.9793 25.8043 10.588 25.413C10.196 25.021 10 24.55 10 24V12C10 11.45 10.196 10.979 10.588 10.587C10.9793 10.1957 11.45 10 12 10H28C28.55 10 29.021 10.1957 29.413 10.587C29.8043 10.979 30 11.45 30 12V27.575C30 28.025 29.796 28.3373 29.388 28.512C28.9793 28.6873 28.6167 28.6167 28.3 28.3ZM12 12V24H26.825L28 25.175V12H12Z"
                                            fill="black" />
                                    </g>
                                </svg>
                            </div>
                            <div class="edit-message" *ngIf="message.senderId===global.currentUserData.id">
                                <div class="edit-icon">
                                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1817_16003" style="mask-type:alpha" maskUnits="userSpaceOnUse"
                                            x="8" y="8" width="24" height="24">
                                            <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1817_16003)">
                                            <path
                                                d="M20 28C19.45 28 18.9792 27.8042 18.5875 27.4125C18.1958 27.0208 18 26.55 18 26C18 25.45 18.1958 24.9792 18.5875 24.5875C18.9792 24.1958 19.45 24 20 24C20.55 24 21.0208 24.1958 21.4125 24.5875C21.8042 24.9792 22 25.45 22 26C22 26.55 21.8042 27.0208 21.4125 27.4125C21.0208 27.8042 20.55 28 20 28ZM20 22C19.45 22 18.9792 21.8042 18.5875 21.4125C18.1958 21.0208 18 20.55 18 20C18 19.45 18.1958 18.9792 18.5875 18.5875C18.9792 18.1958 19.45 18 20 18C20.55 18 21.0208 18.1958 21.4125 18.5875C21.8042 18.9792 22 19.45 22 20C22 20.55 21.8042 21.0208 21.4125 21.4125C21.0208 21.8042 20.55 22 20 22ZM20 16C19.45 16 18.9792 15.8042 18.5875 15.4125C18.1958 15.0208 18 14.55 18 14C18 13.45 18.1958 12.9792 18.5875 12.5875C18.9792 12.1958 19.45 12 20 12C20.55 12 21.0208 12.1958 21.4125 12.5875C21.8042 12.9792 22 13.45 22 14C22 14.55 21.8042 15.0208 21.4125 15.4125C21.0208 15.8042 20.55 16 20 16Z"
                                                fill="#1C1B1F" />
                                        </g>
                                    </svg>
                                </div>
                          
                                <mat-card  [ngClass]="{'position-edit':isiconShow===message.id}"   class="edit-messages-card" appearance="outlined">
                                    <mat-card-content class="edit-message-content">
                                        <span (click)="editMessages(message)">Nachricht bearbeiten</span>
                                    </mat-card-content>
                                </mat-card>
                            </div>

                        </mat-card-content>
                    </mat-card>

            <div [ngClass]="{
              'picture-box-current':
                message.senderId === global.currentUserData.id,
              'picture-box-user': message.senderId !== global.currentUserData.id
            }">
              <img class="sender-picture" [src]="message.senderPicture" />
            </div>
            <div [ngClass]="{
              'message-content-current':
                message.senderId === global.currentUserData.id,
              'message-content-user':
                message.senderId !== global.currentUserData.id
            }">
              <div [ngClass]="{
                'current-name-box':
                  message.senderId === global.currentUserData.id,
                'user-name-box': message.senderId !== global.currentUserData.id
              }">
                <span class="message-time">{{
                  message.timestamp | date : "HH:mm"
                  }}</span>
                <span class="sender-name">{{ message.senderName }}</span>
              </div>
              <div class="message-area">
                <mat-card [ngClass]="{
                  'message-card-current':
                    message.senderId === global.currentUserData.id,
                  'message-card-user':
                    message.senderId !== global.currentUserData.id
                }" appearance="outlined">
                  <mat-card-content [ngClass]="{
                    'card-content-current':
                      message.senderId === global.currentUserData.id,
                    'card-content-user':
                      message.senderId !== global.currentUserData.id
                  }">{{ message.text }}</mat-card-content>
                </mat-card>
              </div>
              <div class="avatar-box">
                <mat-card *ngIf="messageIdHovered === message.id" [class]="{
                  'sticker-senderName-current':
                    message.senderId === global.currentUserData.id,
                  hoveredSenderName:
                    hoveredSenderName &&
                    message.recipientSticker !== message.senderSticker &&
                    message.recipientSticker !== '',
                  hoveredName:
                    hoveredName &&
                    message.recipientSticker !== message.senderSticker,
                  hovered: messageIdHovered,
                  seperateName:
                    message.recipientSticker !== '' &&
                    message.senderSticker === '',
                  hoveredRecipienUser:
                    hoveredRecipienUser &&
                    message.senderSticker !== '' &&
                    message.senderSticker !== message.recipientSticker,
                  'sticker-senderName-user':
                    message.senderId !== global.currentUserData.id
                }">
                  <mat-card-content>
                    <div *ngIf="
                      message.senderId === global.currentUserData.id &&
                      messageIdHovered === message.id
                    ">
                      <div class="sticker-info" *ngIf="
                        message.recipientSticker !== '' &&
                        message.senderSticker === ''
                      ">
                        <img [src]="message.recipientSticker" />
                        <span class="sticker-sender-name">
                          {{ message.recipientName }} hat drauf reagiert</span>
                      </div>
                      <div class="sticker-info" *ngIf="
                        message.senderSticker !== '' &&
                        message.recipientSticker === ''
                      ">
                        <img [src]="message.senderSticker" />
                        <span class="sticker-sender-name">
                          Du hast drauf reagiert</span>
                      </div>
                      <div class="sticker-info" *ngIf="message.recipientSticker === message.senderSticker">
                        <img [src]="message.recipientSticker" />
                        <span class="sticker-sender-name">{{ message.recipientName }} und Du drauf reagiert</span>
                      </div>

                      <div class="sticker-info" *ngIf="
                        hoveredRecipienUser &&
                        message.senderSticker !== '' &&
                        message.senderSticker !== message.recipientSticker
                      ">
                        <img [src]="message.recipientSticker" />
                        <span class="sticker-sender-name">
                          {{ hoveredRecipienUser }} hat drauf reagiert
                        </span>
                      </div>

                      <div class="sticker-info" *ngIf="
                        hoveredCurrentUser &&
                        message.recipientSticker !== message.senderSticker &&
                        message.recipientSticker !== ''
                      ">
                        <img [src]="message.senderSticker" />
                        <span class="sticker-sender-name">
                          {{ hoveredCurrentUser }} hast drauf reagiert
                        </span>
                      </div>
                    </div>

                    <div *ngIf="
                      message.senderId !== global.currentUserData.id &&
                      messageIdHovered === message.id
                    ">
                      <div class="sticker-info" *ngIf="
                        message.recipientSticker !== '' &&
                        message.senderSticker === ''
                      ">
                        <img [src]="message.recipientSticker" />
                        <span class="sticker-sender-name">Du hast drauf reagiert</span>
                      </div>

                      <div class="sticker-info" *ngIf="
                        message.senderSticker !== '' &&
                        message.recipientSticker === ''
                      ">
                        <img [src]="message.senderSticker" />
                        <span class="sticker-sender-name">{{ message.senderName }} hat drauf reagiert
                        </span>
                      </div>
                      <div class="sticker-info" *ngIf="message.recipientSticker === message.senderSticker">
                        <img [src]="message.recipientSticker" />
                        <span class="sticker-sender-name">{{ message.senderName }} und Du drauf reagiert</span>
                      </div>

                      <div class="sticker-info" *ngIf="
                        hoveredName &&
                        message.recipientSticker !== message.senderSticker &&
                        message.senderSticker !== ''
                      ">
                        <img [src]="message.recipientSticker" />
                        <span class="sticker-sender-name">
                          {{ hoveredName }} hast drauf reagiert
                        </span>
                      </div>

                      <div class="sticker-info" *ngIf="
                        hoveredSenderName &&
                        message.recipientSticker !== message.senderSticker &&
                        message.recipientSticker !== ''
                      ">
                        <img [src]="message.senderSticker" />
                        <span class="sticker-sender-name">
                          {{ hoveredSenderName }} hat drauf reagiert
                        </span>
                      </div>
                    </div>
                  </mat-card-content>
                </mat-card>

                <div *ngIf="message.senderSticker !== ''" class="show-comment-stricker" (mouseenter)="
                  messageIdHovered = message.id;
                  hoveredSenderName = message.senderName;
                  hoveredCurrentUser = 'Du'
                " (mouseleave)="
                  messageIdHovered = null;
                  hoveredSenderName = null;
                  hoveredCurrentUser = null
                ">
                  <img [src]="message.senderSticker" />
                  <span>{{ message.senderStickerCount || 1 }}</span>
                </div>

                <div *ngIf="
                  message.recipientSticker !== '' &&
                  message.recipientSticker !== message.senderSticker
                " class="show-comment-stricker" (mouseenter)="
                  messageIdHovered = message.id;
                  hoveredName = 'Du';
                  hoveredRecipienUser = message.recipientName
                " (mouseleave)="
                  messageIdHovered = null;
                  hoveredName = null;
                  hoveredRecipienUser = null
                ">
                  <img [src]="message.recipientSticker" />
                  <span>{{ message.recipientStickerCount || 1 }}</span>
                </div>

                            <div class="show-stricker">
                            
                                

                                <div  (mouseenter)="showStickerCard(message)"
                                      (mouseleave)="showStickerDiv=null" 
                                        class="show-stricker-svgbox">
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_489_4318" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8"
                                        y="8" width="24" height="24">
                                        <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_489_4318)">
                                        <path
                                            d="M20 30C18.6167 30 17.3167 29.7375 16.1 29.2125C14.8833 28.6875 13.825 27.975 12.925 27.075C12.025 26.175 11.3125 25.1167 10.7875 23.9C10.2625 22.6833 10 21.3833 10 20C10 18.6167 10.2625 17.3167 10.7875 16.1C11.3125 14.8833 12.025 13.825 12.925 12.925C13.825 12.025 14.8833 11.3125 16.1 10.7875C17.3167 10.2625 18.6167 10 20 10C20.75 10 21.4792 10.0792 22.1875 10.2375C22.8958 10.3958 23.5667 10.625 24.2 10.925C24.1333 11.0917 24.0833 11.2667 24.05 11.45C24.0167 11.6333 24 11.8167 24 12C24 12.2333 24.025 12.4542 24.075 12.6625C24.125 12.8708 24.1917 13.0667 24.275 13.25C23.6583 12.8667 22.9917 12.5625 22.275 12.3375C21.5583 12.1125 20.8 12 20 12C17.7833 12 15.8958 12.7792 14.3375 14.3375C12.7792 15.8958 12 17.7833 12 20C12 22.2167 12.7792 24.1042 14.3375 25.6625C15.8958 27.2208 17.7833 28 20 28C22.2167 28 24.1042 27.2208 25.6625 25.6625C27.2208 24.1042 28 22.2167 28 20C28 19.3333 27.9208 18.6917 27.7625 18.075C27.6042 17.4583 27.3833 16.875 27.1 16.325C27.3667 16.5417 27.6583 16.7083 27.975 16.825C28.2917 16.9417 28.6333 17 29 17C29.0833 17 29.1708 16.9958 29.2625 16.9875C29.3542 16.9792 29.4417 16.9667 29.525 16.95C29.675 17.4333 29.7917 17.9292 29.875 18.4375C29.9583 18.9458 30 19.4667 30 20C30 21.3833 29.7375 22.6833 29.2125 23.9C28.6875 25.1167 27.975 26.175 27.075 27.075C26.175 27.975 25.1167 28.6875 23.9 29.2125C22.6833 29.7375 21.3833 30 20 30ZM23.5 19C23.9333 19 24.2917 18.8583 24.575 18.575C24.8583 18.2917 25 17.9333 25 17.5C25 17.0667 24.8583 16.7083 24.575 16.425C24.2917 16.1417 23.9333 16 23.5 16C23.0667 16 22.7083 16.1417 22.425 16.425C22.1417 16.7083 22 17.0667 22 17.5C22 17.9333 22.1417 18.2917 22.425 18.575C22.7083 18.8583 23.0667 19 23.5 19ZM16.5 19C16.9333 19 17.2917 18.8583 17.575 18.575C17.8583 18.2917 18 17.9333 18 17.5C18 17.0667 17.8583 16.7083 17.575 16.425C17.2917 16.1417 16.9333 16 16.5 16C16.0667 16 15.7083 16.1417 15.425 16.425C15.1417 16.7083 15 17.0667 15 17.5C15 17.9333 15.1417 18.2917 15.425 18.575C15.7083 18.8583 16.0667 19 16.5 19ZM20 25.5C21.1833 25.5 22.2292 25.175 23.1375 24.525C24.0458 23.875 24.7 23.0333 25.1 22H14.9C15.3 23.0333 15.9542 23.875 16.8625 24.525C17.7708 25.175 18.8167 25.5 20 25.5ZM28 13H27C26.7167 13 26.4792 12.9042 26.2875 12.7125C26.0958 12.5208 26 12.2833 26 12C26 11.7167 26.0958 11.4792 26.2875 11.2875C26.4792 11.0958 26.7167 11 27 11H28V10C28 9.71667 28.0958 9.47917 28.2875 9.2875C28.4792 9.09583 28.7167 9 29 9C29.2833 9 29.5208 9.09583 29.7125 9.2875C29.9042 9.47917 30 9.71667 30 10V11H31C31.2833 11 31.5208 11.0958 31.7125 11.2875C31.9042 11.4792 32 11.7167 32 12C32 12.2833 31.9042 12.5208 31.7125 12.7125C31.5208 12.9042 31.2833 13 31 13H30V14C30 14.2833 29.9042 14.5208 29.7125 14.7125C29.5208 14.9042 29.2833 15 29 15C28.7167 15 28.4792 14.9042 28.2875 14.7125C28.0958 14.5208 28 14.2833 28 14V13Z"
                                            fill="black" />
                                    </g>
                                </svg>


                                <mat-card  *ngIf="showStickerDiv===message.id"  class="show-sticker-card"  (mouseenter)="displayOpacity(message)"   
                            (mouseleave)="removeOpacity(message)"   
                             
                            [ngClass]=" {'opacity':message.stickerBoxOpacity}">
                            <mat-card-content    class="show-sticker-cardContent">
                                <div *ngFor="let sticker of concatStickerArray">
                                    <div class="show-sticker-box"
                                        (click)="chooseStricker($event,message,sticker)" [ngClass]="{'backColor-current':message.senderchoosedStickereBackColor===sticker && message.senderId===global.currentUserData.id && message.senderSticker!== '',
                                                    'backColor-user':message.recipientChoosedStickerBackColor===sticker && message.senderId!== global.currentUserData.id && message.recipientSticker !== '',
                                }">
                                        <img [src]="sticker">
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>   

                            </div>

                            
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


<!-- Current User conversations -->
        <div *ngIf="global.statusCheck" #scrollContainer class="main-current-messagebox" >
            <div *ngFor="let message of messagesData; let i=index">
                <div *ngIf="displayDayInfo(i)"  class="new-day-info">
                    <div class="day-info">
                        <div class="line"></div>
                        <span class="day-span">{{ getDayInfoForMessage(i) }}</span>
                    </div>
                </div>  
                <div [ngClass]="{'main-mesage-info-current':message.senderId===global.currentUserData.id,
                     'backiColor':checkUpdateBackcolor===message.id
                }"
                    (mouseleave)="resetIcon(message);">
                    <div *ngIf="editMessageId === message.id" class="edit-mesage-box">

                        <textarea class="edit-input" [(ngModel)]="editableMessageText"></textarea>
                        <div class="button-box">
                            <button class="btn-secondary" (click)="cancelEdit()">Abbrechen</button>
                            <button class="btn-primary" (click)="saveOrDeleteMessage(message)">{{editableMessageText.trim()===''?'Löschen':'Speichern'}}</button>
                        </div>
                    </div>
                    <mat-card *ngIf="editMessageId !== message.id" [ngClass]="{'comment-box-current':message.senderId===global.currentUserData.id,
                'position':message.stickerBoxCurrentStyle || message.stickerBoxOpacity===true,
                'position-user':message.stickerBoxCurrentStyle,
                 }">
                        <mat-card-content style="padding: 5px 5px;" class="comment-content">
                            <div *ngFor="let image of commentImages let i=index"
                                (click)="chooseStricker($event,message,image)">
                                <div class="comment-stricker"
                                    [ngClass]="{'backColor-current':message.senderchoosedStickereBackColor===image && message.senderId===global.currentUserData.id && message.senderSticker!== ''}">

                                    <img [src]="image">
                                </div>
                            </div>


                            <div [ngClass]="{'hidden': isiconShow===message.id}" class="add-reaction"
                                (click)="displayHiddenIcon(message)">
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_489_4318" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8"
                                        y="8" width="24" height="24">
                                        <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_489_4318)">
                                        <path
                                            d="M20 30C18.6167 30 17.3167 29.7375 16.1 29.2125C14.8833 28.6875 13.825 27.975 12.925 27.075C12.025 26.175 11.3125 25.1167 10.7875 23.9C10.2625 22.6833 10 21.3833 10 20C10 18.6167 10.2625 17.3167 10.7875 16.1C11.3125 14.8833 12.025 13.825 12.925 12.925C13.825 12.025 14.8833 11.3125 16.1 10.7875C17.3167 10.2625 18.6167 10 20 10C20.75 10 21.4792 10.0792 22.1875 10.2375C22.8958 10.3958 23.5667 10.625 24.2 10.925C24.1333 11.0917 24.0833 11.2667 24.05 11.45C24.0167 11.6333 24 11.8167 24 12C24 12.2333 24.025 12.4542 24.075 12.6625C24.125 12.8708 24.1917 13.0667 24.275 13.25C23.6583 12.8667 22.9917 12.5625 22.275 12.3375C21.5583 12.1125 20.8 12 20 12C17.7833 12 15.8958 12.7792 14.3375 14.3375C12.7792 15.8958 12 17.7833 12 20C12 22.2167 12.7792 24.1042 14.3375 25.6625C15.8958 27.2208 17.7833 28 20 28C22.2167 28 24.1042 27.2208 25.6625 25.6625C27.2208 24.1042 28 22.2167 28 20C28 19.3333 27.9208 18.6917 27.7625 18.075C27.6042 17.4583 27.3833 16.875 27.1 16.325C27.3667 16.5417 27.6583 16.7083 27.975 16.825C28.2917 16.9417 28.6333 17 29 17C29.0833 17 29.1708 16.9958 29.2625 16.9875C29.3542 16.9792 29.4417 16.9667 29.525 16.95C29.675 17.4333 29.7917 17.9292 29.875 18.4375C29.9583 18.9458 30 19.4667 30 20C30 21.3833 29.7375 22.6833 29.2125 23.9C28.6875 25.1167 27.975 26.175 27.075 27.075C26.175 27.975 25.1167 28.6875 23.9 29.2125C22.6833 29.7375 21.3833 30 20 30ZM23.5 19C23.9333 19 24.2917 18.8583 24.575 18.575C24.8583 18.2917 25 17.9333 25 17.5C25 17.0667 24.8583 16.7083 24.575 16.425C24.2917 16.1417 23.9333 16 23.5 16C23.0667 16 22.7083 16.1417 22.425 16.425C22.1417 16.7083 22 17.0667 22 17.5C22 17.9333 22.1417 18.2917 22.425 18.575C22.7083 18.8583 23.0667 19 23.5 19ZM16.5 19C16.9333 19 17.2917 18.8583 17.575 18.575C17.8583 18.2917 18 17.9333 18 17.5C18 17.0667 17.8583 16.7083 17.575 16.425C17.2917 16.1417 16.9333 16 16.5 16C16.0667 16 15.7083 16.1417 15.425 16.425C15.1417 16.7083 15 17.0667 15 17.5C15 17.9333 15.1417 18.2917 15.425 18.575C15.7083 18.8583 16.0667 19 16.5 19ZM20 25.5C21.1833 25.5 22.2292 25.175 23.1375 24.525C24.0458 23.875 24.7 23.0333 25.1 22H14.9C15.3 23.0333 15.9542 23.875 16.8625 24.525C17.7708 25.175 18.8167 25.5 20 25.5ZM28 13H27C26.7167 13 26.4792 12.9042 26.2875 12.7125C26.0958 12.5208 26 12.2833 26 12C26 11.7167 26.0958 11.4792 26.2875 11.2875C26.4792 11.0958 26.7167 11 27 11H28V10C28 9.71667 28.0958 9.47917 28.2875 9.2875C28.4792 9.09583 28.7167 9 29 9C29.2833 9 29.5208 9.09583 29.7125 9.2875C29.9042 9.47917 30 9.71667 30 10V11H31C31.2833 11 31.5208 11.0958 31.7125 11.2875C31.9042 11.4792 32 11.7167 32 12C32 12.2833 31.9042 12.5208 31.7125 12.7125C31.5208 12.9042 31.2833 13 31 13H30V14C30 14.2833 29.9042 14.5208 29.7125 14.7125C29.5208 14.9042 29.2833 15 29 15C28.7167 15 28.4792 14.9042 28.2875 14.7125C28.0958 14.5208 28 14.2833 28 14V13Z"
                                            fill="black" />
                                    </g>
                                </svg>
                            </div>
                            <div *ngFor="let stricker of commentStricker"
                                (click)="chooseStricker ($event,message,stricker)">
                                <div *ngIf="isiconShow===message.id" class="comment-icon-box"
                                    [ngClass]="{'backColor-current':message.senderchoosedStickereBackColor===stricker && message.senderId===global.currentUserData.id && message.senderSticker!== '', }">

                                    <img [src]="stricker">
                                </div>
                            </div>
                            <div class="open-thread">
                                <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <mask id="mask0_489_4322" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8"
                                        y="8" width="24" height="24">
                                        <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                    </mask>
                                    <g mask="url(#mask0_489_4322)">
                                        <path
                                            d="M15 22H25C25.2833 22 25.5207 21.904 25.712 21.712C25.904 21.5207 26 21.2833 26 21C26 20.7167 25.904 20.479 25.712 20.287C25.5207 20.0957 25.2833 20 25 20H15C14.7167 20 14.479 20.0957 14.287 20.287C14.0957 20.479 14 20.7167 14 21C14 21.2833 14.0957 21.5207 14.287 21.712C14.479 21.904 14.7167 22 15 22ZM15 19H25C25.2833 19 25.5207 18.904 25.712 18.712C25.904 18.5207 26 18.2833 26 18C26 17.7167 25.904 17.479 25.712 17.287C25.5207 17.0957 25.2833 17 25 17H15C14.7167 17 14.479 17.0957 14.287 17.287C14.0957 17.479 14 17.7167 14 18C14 18.2833 14.0957 18.5207 14.287 18.712C14.479 18.904 14.7167 19 15 19ZM15 16H25C25.2833 16 25.5207 15.9043 25.712 15.713C25.904 15.521 26 15.2833 26 15C26 14.7167 25.904 14.479 25.712 14.287C25.5207 14.0957 25.2833 14 25 14H15C14.7167 14 14.479 14.0957 14.287 14.287C14.0957 14.479 14 14.7167 14 15C14 15.2833 14.0957 15.521 14.287 15.713C14.479 15.9043 14.7167 16 15 16ZM28.3 28.3L26 26H12C11.45 26 10.9793 25.8043 10.588 25.413C10.196 25.021 10 24.55 10 24V12C10 11.45 10.196 10.979 10.588 10.587C10.9793 10.1957 11.45 10 12 10H28C28.55 10 29.021 10.1957 29.413 10.587C29.8043 10.979 30 11.45 30 12V27.575C30 28.025 29.796 28.3373 29.388 28.512C28.9793 28.6873 28.6167 28.6167 28.3 28.3ZM12 12V24H26.825L28 25.175V12H12Z"
                                            fill="black" />
                                    </g>
                                </svg>
                            </div>
                            <div class="edit-message" *ngIf="message.senderId===global.currentUserData.id">
                                <div class="edit-icon">
                                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <mask id="mask0_1817_16003" style="mask-type:alpha" maskUnits="userSpaceOnUse"
                                            x="8" y="8" width="24" height="24">
                                            <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                        </mask>
                                        <g mask="url(#mask0_1817_16003)">
                                            <path
                                                d="M20 28C19.45 28 18.9792 27.8042 18.5875 27.4125C18.1958 27.0208 18 26.55 18 26C18 25.45 18.1958 24.9792 18.5875 24.5875C18.9792 24.1958 19.45 24 20 24C20.55 24 21.0208 24.1958 21.4125 24.5875C21.8042 24.9792 22 25.45 22 26C22 26.55 21.8042 27.0208 21.4125 27.4125C21.0208 27.8042 20.55 28 20 28ZM20 22C19.45 22 18.9792 21.8042 18.5875 21.4125C18.1958 21.0208 18 20.55 18 20C18 19.45 18.1958 18.9792 18.5875 18.5875C18.9792 18.1958 19.45 18 20 18C20.55 18 21.0208 18.1958 21.4125 18.5875C21.8042 18.9792 22 19.45 22 20C22 20.55 21.8042 21.0208 21.4125 21.4125C21.0208 21.8042 20.55 22 20 22ZM20 16C19.45 16 18.9792 15.8042 18.5875 15.4125C18.1958 15.0208 18 14.55 18 14C18 13.45 18.1958 12.9792 18.5875 12.5875C18.9792 12.1958 19.45 12 20 12C20.55 12 21.0208 12.1958 21.4125 12.5875C21.8042 12.9792 22 13.45 22 14C22 14.55 21.8042 15.0208 21.4125 15.4125C21.0208 15.8042 20.55 16 20 16Z"
                                                fill="#1C1B1F" />
                                        </g>
                                    </svg>
                                </div>
                                <mat-card  [ngClass]="{'position-edit':isiconShow===message.id}"  class="edit-messages-card" appearance="outlined">
                                    <mat-card-content class="edit-message-content">
                                        <span (click)="editMessages(message)">Nachricht bearbeiten</span>
                                    </mat-card-content>
                                </mat-card>
                            </div>

                        </mat-card-content>
                    </mat-card>
                    <div
                        [ngClass]="{'picture-box-current':message.senderId===global.currentUserData.id,}">
                        <img class="sender-picture" [src]="message.senderPicture">
                    </div>


                    <div
                    [ngClass]="{'message-content-current': message.senderId===global.currentUserData.id,'message-content-user':message.senderId !== global.currentUserData.id}">
                    <div
                        [ngClass]="{'current-name-box':message.senderId===global.currentUserData.id, 'user-name-box':message.senderId!==global.currentUserData.id}">
                        <span class="message-time">{{ message.timestamp | date: 'HH:mm' }}</span>
                        <span class="sender-name">{{message.senderName}}</span>
                    </div>
                    <div class="message-area">
                        <mat-card
                            [ngClass]="{'message-card-current':message.senderId===global.currentUserData.id,}"
                            appearance="outlined">
                            <mat-card-content
                                [ngClass]="{'card-content-current':message.senderId===global.currentUserData.id,}">{{message.text}}</mat-card-content>
                        </mat-card>
                    </div>
                    <div class="avatar-box">
                        <mat-card *ngIf=" messageIdHovered===message.id" [class]="{'sticker-senderName-current':message.senderId===global.currentUserData.id, 
                            'hoveredSenderName':hoveredSenderName && message.recipientSticker !== message.senderSticker && message.recipientSticker !== '',
                            'hoveredName':hoveredName && message.recipientSticker !== message.senderSticker,  
                            'hovered': messageIdHovered,
                            'seperateName':message.recipientSticker !=='' && message.senderSticker=== '',
                             'hoveredRecipienUser':hoveredRecipienUser  && message.senderSticker!== '' && message.senderSticker !== message.recipientSticker,
                            'sticker-senderName-user':message.senderId!==global.currentUserData.id}">
                            <mat-card-content>
                                <div
                                    *ngIf="message.senderId===global.currentUserData.id &&  messageIdHovered===message.id">
                                    <div class="sticker-info"
                                        *ngIf="message.recipientSticker !=='' && message.senderSticker===''  ">
                                        <img [src]="message.recipientSticker">
                                        <span class="sticker-sender-name"> {{message.recipientName}} hat drauf
                                            reagiert</span>
                                    </div>
                                    <div class="sticker-info"
                                        *ngIf="message.senderSticker!== '' && message.recipientSticker===''">
                                        <img [src]="message.senderSticker">
                                        <span class="sticker-sender-name"> Du hast drauf reagiert</span>
                                    </div>
                                    <div class="sticker-info"
                                        *ngIf="message.recipientSticker=== message.senderSticker">
                                        <img [src]="message.recipientSticker">
                                        <span class="sticker-sender-name">{{message.recipientName}} und Du drauf
                                            reagiert</span>
                                    </div>

                                    <div class="sticker-info"
                                        *ngIf="hoveredRecipienUser  && message.senderSticker!== '' && message.senderSticker !== message.recipientSticker">
                                        <img [src]="message.recipientSticker">
                                        <span class="sticker-sender-name"> {{hoveredRecipienUser}} hat drauf
                                            reagiert </span>
                                    </div>

                                    <div class="sticker-info"
                                        *ngIf="hoveredCurrentUser  &&  message.recipientSticker !== message.senderSticker && message.recipientSticker !== '' ">
                                        <img [src]="message.senderSticker">
                                        <span class="sticker-sender-name"> {{hoveredCurrentUser}} hast drauf
                                            reagiert </span>
                                    </div>
                                </div>
                            </mat-card-content>
                        </mat-card>


                        <div *ngIf="message.senderSticker !=='' " class="show-comment-stricker"
                            (mouseenter)=" messageIdHovered=message.id;  hoveredSenderName=message.senderName; hoveredCurrentUser='Du'"
                            (mouseleave)=" messageIdHovered=null;   hoveredSenderName = null;hoveredCurrentUser=null;">
                            <img [src]="message.senderSticker">
                            <span>{{ message.senderStickerCount || 1 }}</span>
                        </div>

                        <div  class="show-stricker"> 
                            <div class="show-stricker-svgbox"  (mouseenter)="showStickerCard(message)" 
                             (mouseleave)="showStickerDiv=null">
                            <svg width="40" height="40" viewBox="0 0 40 40" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <mask id="mask0_489_4318" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="8"
                                    y="8" width="24" height="24">
                                    <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
                                </mask>
                                <g mask="url(#mask0_489_4318)">
                                    <path
                                        d="M20 30C18.6167 30 17.3167 29.7375 16.1 29.2125C14.8833 28.6875 13.825 27.975 12.925 27.075C12.025 26.175 11.3125 25.1167 10.7875 23.9C10.2625 22.6833 10 21.3833 10 20C10 18.6167 10.2625 17.3167 10.7875 16.1C11.3125 14.8833 12.025 13.825 12.925 12.925C13.825 12.025 14.8833 11.3125 16.1 10.7875C17.3167 10.2625 18.6167 10 20 10C20.75 10 21.4792 10.0792 22.1875 10.2375C22.8958 10.3958 23.5667 10.625 24.2 10.925C24.1333 11.0917 24.0833 11.2667 24.05 11.45C24.0167 11.6333 24 11.8167 24 12C24 12.2333 24.025 12.4542 24.075 12.6625C24.125 12.8708 24.1917 13.0667 24.275 13.25C23.6583 12.8667 22.9917 12.5625 22.275 12.3375C21.5583 12.1125 20.8 12 20 12C17.7833 12 15.8958 12.7792 14.3375 14.3375C12.7792 15.8958 12 17.7833 12 20C12 22.2167 12.7792 24.1042 14.3375 25.6625C15.8958 27.2208 17.7833 28 20 28C22.2167 28 24.1042 27.2208 25.6625 25.6625C27.2208 24.1042 28 22.2167 28 20C28 19.3333 27.9208 18.6917 27.7625 18.075C27.6042 17.4583 27.3833 16.875 27.1 16.325C27.3667 16.5417 27.6583 16.7083 27.975 16.825C28.2917 16.9417 28.6333 17 29 17C29.0833 17 29.1708 16.9958 29.2625 16.9875C29.3542 16.9792 29.4417 16.9667 29.525 16.95C29.675 17.4333 29.7917 17.9292 29.875 18.4375C29.9583 18.9458 30 19.4667 30 20C30 21.3833 29.7375 22.6833 29.2125 23.9C28.6875 25.1167 27.975 26.175 27.075 27.075C26.175 27.975 25.1167 28.6875 23.9 29.2125C22.6833 29.7375 21.3833 30 20 30ZM23.5 19C23.9333 19 24.2917 18.8583 24.575 18.575C24.8583 18.2917 25 17.9333 25 17.5C25 17.0667 24.8583 16.7083 24.575 16.425C24.2917 16.1417 23.9333 16 23.5 16C23.0667 16 22.7083 16.1417 22.425 16.425C22.1417 16.7083 22 17.0667 22 17.5C22 17.9333 22.1417 18.2917 22.425 18.575C22.7083 18.8583 23.0667 19 23.5 19ZM16.5 19C16.9333 19 17.2917 18.8583 17.575 18.575C17.8583 18.2917 18 17.9333 18 17.5C18 17.0667 17.8583 16.7083 17.575 16.425C17.2917 16.1417 16.9333 16 16.5 16C16.0667 16 15.7083 16.1417 15.425 16.425C15.1417 16.7083 15 17.0667 15 17.5C15 17.9333 15.1417 18.2917 15.425 18.575C15.7083 18.8583 16.0667 19 16.5 19ZM20 25.5C21.1833 25.5 22.2292 25.175 23.1375 24.525C24.0458 23.875 24.7 23.0333 25.1 22H14.9C15.3 23.0333 15.9542 23.875 16.8625 24.525C17.7708 25.175 18.8167 25.5 20 25.5ZM28 13H27C26.7167 13 26.4792 12.9042 26.2875 12.7125C26.0958 12.5208 26 12.2833 26 12C26 11.7167 26.0958 11.4792 26.2875 11.2875C26.4792 11.0958 26.7167 11 27 11H28V10C28 9.71667 28.0958 9.47917 28.2875 9.2875C28.4792 9.09583 28.7167 9 29 9C29.2833 9 29.5208 9.09583 29.7125 9.2875C29.9042 9.47917 30 9.71667 30 10V11H31C31.2833 11 31.5208 11.0958 31.7125 11.2875C31.9042 11.4792 32 11.7167 32 12C32 12.2833 31.9042 12.5208 31.7125 12.7125C31.5208 12.9042 31.2833 13 31 13H30V14C30 14.2833 29.9042 14.5208 29.7125 14.7125C29.5208 14.9042 29.2833 15 29 15C28.7167 15 28.4792 14.9042 28.2875 14.7125C28.0958 14.5208 28 14.2833 28 14V13Z"
                                        fill="black" />
                                </g>
                            </svg>  
                            <mat-card   *ngIf="showStickerDiv===message.id"  (mouseenter)="displayOpacity(message)" 
                            (mouseleave)="removeOpacity(message)"
                            class="show-sticker-card"
                             appearance="outlined"
                                [ngClass]=" {'opacity':message.stickerBoxOpacity }">
                                <mat-card-content class="show-sticker-cardContent">
                                    <div *ngFor="let sticker of concatStickerArray">
                                        <div class="show-sticker-box"
                                            (click)="chooseStricker($event,message,sticker)" [ngClass]="{'backColor-current':message.senderchoosedStickereBackColor===sticker && message.senderId===global.currentUserData.id && message.senderSticker!== '',
                                                        'backColor-user':message.recipientChoosedStickerBackColor===sticker && message.senderId!== global.currentUserData.id && message.recipientSticker !== '',
                                    }">
                                            <img [src]="sticker">
                                        </div>
                                    </div>
                                </mat-card-content>
                            </mat-card>
                        </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>

        
        <div class="msg-input-ct">
            <label for="msg-input"></label>
            <textarea   placeholder="Nachricht an #Entwicklerteam" class="chat-input" type="text"
                [(ngModel)]="chatMessage">
            </textarea>
            <div class="interactions-send-msg-ct">
                <div class="only-interactions-bottom-ct">
                    <div class="plus-separator-flex">
                        <div>
                            <div>
                                <input type="file" id="upload" (change)="onFileSelected($event)" hidden />
                                <label for="upload"> <img class="plus" src="./assets/img/add_reaction.png"></label>
                                  
                            </div>
                        </div>

                       
                        
                    </div>
                    <img src="./assets/img/vector_4.svg">

                    <div class="emoji-at-ct">
                        <div class="emoji-picker-container">
                            <emoji-mart *ngIf="isEmojiPickerVisible" (emojiClick)="addEmoji($event)"
                                class="emoji-picker" size="18"></emoji-mart>
                            <div> <img  (click)="toggleEmojiPicker()"  src="./assets/img/emoji.svg"></div>
                        </div>
                        <div (click)="openMentionPeople()"> <img src="./assets/img/at_react.svg"></div>
                    </div> 
                     <app-people-mention class="people-mention-card" *ngIf="global.openMentionPeopleCard" (mentionUser)="handleMentionUser($event)"></app-people-mention>
                </div>
                
                <img class="msg-send" src="./assets/img/msg_send.svg" (click)="sendMessage()">
               
            </div>
        </div>

    

    </mat-card>


</div>